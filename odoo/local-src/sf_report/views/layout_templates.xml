<?xml version="1.0" encoding="utf-8"?>
<odoo>

<template id="sf_external_layout">
    <!-- Multicompany -->
    <t t-if="not o and doc">
        <t t-set="o" t-value="doc"/>
    </t>
    <t t-if="o and 'company_id' in o">
        <t t-set="company" t-value="o.company_id"></t>
    </t>
    <t t-if="not o or not 'company_id' in o">
        <t t-set="company" t-value="res_company"></t>
    </t>

    <t t-call="sf_report.sf_external_layout_header" />
    <t t-raw="0" />
    <t t-call="report.external_layout_footer" />
</template>

<template id="sf_external_layout_header">
    <div class="header">
        <div class="row" style="border-bottom:2px solid #ccc;position: relative;">
            <div class="col-xs-9" id="header_company" style="margin-bottom: 10px;">
                    <img style="max-height: 100px" src="/sf_report/static/src/img/report_logo_sensefly_sa.png"/>
                    <div style="display: inline-block; vertical-align: bottom;">
                        <p style="font-weight:bold"> <span t-field="company.name"/></p>
                        <span t-field="company.partner_id"
                              t-field-options='{"widget": "contact", "fields": ["address"], "no_marker": true}'
                              style="display:inline-block"/>
                        <p style="margin-bottom: 0;">VAT: <span t-field="company.company_registry"/></p>
                    </div>
            </div>
            <!-- Placeholder to add title -->
            <div name="header_title" class="col-xs-4" style="margin-bottom: 10px;text-align: right;position: absolute;bottom: 0;right: 0;"/>
        </div>
    </div>
</template>

<template id="report.external_layout_footer">
    <div class="footer">
        <p>
            We further refer to our General Terms of Business supplied with this document
            (senseFly’s General Terms &amp; Conditions).
        </p>
        <div class="text-center" style="border-top: 2px solid #ccc;">
            <!--  Don't display that in SF report  -->
            <t t-if="False">
                <ul t-if="not company.custom_footer" class="list-inline">
                    <t t-set="company" t-value="company.sudo()"/>
                    <li t-if="company.phone">Phone: <span t-field="company.phone"/></li>

                    <li t-if="company.fax and company.phone">&amp;bull;</li>
                    <li t-if="company.fax">Fax: <span t-field="company.fax"/></li>

                    <li t-if="company.email and company.fax or company.email and company.phone">&amp;bull;</li>
                    <li t-if="company.email">Email: <span t-field="company.email"/></li>

                    <li t-if="company.website and company.email or company.website and company.fax or company.website and company.phone">&amp;bull;</li>
                    <li t-if="company.website">Website: <span t-field="company.website"/></li>
                </ul>

                <ul t-if="not company.custom_footer" class="list-inline" name="financial_infos">
                    <li t-if="company.vat">TIN: <span t-field="company.vat"/></li>
                </ul>
            </t>

            <t t-if="company.custom_footer">
                <span t-raw="company.rml_footer"/>
            </t>

            <t t-if="not company.custom_footer">
                <t t-set="company" t-value="company.sudo()"/>
                <em>— Company Confidential —</em>
                <p>
                    <span t-field="company.name"/>,
                    <span t-field="company.street"/>,
                    <span t-field="company.zip"/>
                    <span t-field="company.city"/>,
                    <span t-field="company.country_id.name"/> -
                    <span t-field="company.website"/>
                </p>
            </t>

            <ul class="list-inline">
                <li>Page:</li>
                <li><span class="page"/></li>
                <li>/</li>
                <li><span class="topage"/></li>
            </ul>
        </div>
    </div>
</template>

<template id="report.minimal_layout">
    <t t-raw="'&lt;base href=%s&gt;' % base_url"/>
    &lt;!DOCTYPE html&gt;
    <html style="height: 0;">
        <head>
            <t t-call-assets="report.assets_pdf" t-js="false"/>
            <t t-call-assets="report.assets_common" t-js="false"/>
            <t t-call-assets="report.assets_pdf" t-css="false"/>
            <t t-call-assets="report.assets_common" t-css="false"/>
            <meta charset="utf-8"/>
            <t t-if="subst is True">
                <script>
                    function subst() {
                        var vars = {};
                        var x = document.location.search.substring(1).split('&amp;');
                        for (var i in x) {
                            var z = x[i].split('=', 2);
                            vars[z[0]] = unescape(z[1]);
                        }
                        var x=['frompage', 'topage', 'page', 'webpage', 'section', 'subsection', 'subsubsection'];
                        for (var i in x) {
                            var y = document.getElementsByClassName(x[i]);
                            for (var j=0; j&lt;y.length; ++j)
                                y[j].textContent = vars[x[i]];
                        }
                    }
                </script>
            </t>
        </head>
        <body class="container" onload="subst()">
            <t t-raw="body"/>
        </body>
    </html>
</template>

</odoo>
